const express = require('express'); const fs = require('fs'); const app = express(); const PORT = 3000; app.use(express.json()); const dbFile = 'db.json'; if (!fs.existsSync(dbFile)) fs.writeFileSync(dbFile, '{}'); app.post('/signup', (req, res) => { let db = JSON.parse(fs.readFileSync(dbFile)); const { username, password } = req.body; if(db[username]) return res.status(400).send('User exists'); db[username] = { password, progress: {} }; fs.writeFileSync(dbFile, JSON.stringify(db)); res.send('User created'); }); app.post('/login', (req, res) => { let db = JSON.parse(fs.readFileSync(dbFile)); const { username, password } = req.body; if(db[username] && db[username].password === password) return res.send(db[username].progress); res.status(400).send('Invalid'); }); app.post('/sync', (req, res) => { let db = JSON.parse(fs.readFileSync(dbFile)); const { username, progress } = req.body; if(db[username]) { db[username].progress = progress; fs.writeFileSync(dbFile, JSON.stringify(db)); return res.send('Synced'); } res.status(400).send('User not found'); }); app.listen(PORT, () => console.log(`Mock cloud server running on port ${PORT}`));